<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Sculpted by Klea ‚Äî Refined v2</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg: #faf7f6;
  --card: rgba(255,255,255,0.75);
  --muted: #6b6160;
  --heading: #2b2423;
  --accent-1: #cf9ea0; /* warm blush */
  --accent-2: #caa4d2; /* lavender */
  --glass: rgba(255,255,255,0.6);
  --shadow: 0 10px 30px rgba(20,18,16,0.08);
  --radius: 16px;
  --maxw: 1100px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg,#fbf7f6 0%, #f6f2f3 100%);
  color:var(--muted);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding-bottom:64px;
}
.wrap{ max-width:var(--maxw); margin:0 auto; padding:26px; }

/* Header + Hero */
header.site-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px; }
.brand{ display:flex; flex-direction:column; gap:4px; }
.brand .title{ font-size:24px; color:var(--heading); font-weight:700; letter-spacing:0.2px; }
.brand .tag{ font-size:13px; color:var(--muted); }

.hero{
  width:100%;
  height:56vh;
  min-height:300px;
  border-radius:20px;
  overflow:hidden;
  position:relative;
  box-shadow: var(--shadow);
  border:1px solid rgba(35,28,28,0.03);
  display:flex;
  align-items:flex-end;
}

/* hero image layers */
/* ---- START: split-hero CSS (replace previous .hero .bg + .hero-card) ---- */

.hero {
  display: flex;
  align-items: stretch;
  justify-content: space-between;
  width: 100%;
  height: 60vh; /* a bit taller for elegance */
  min-height: 360px;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow);
  background: #fff;
}
/* === PREMIUM TEXT ELEVATION ENHANCEMENT === */

/* Slightly warmer gradient behind text area */
.hero-content {
  background: linear-gradient(
    180deg,
    rgba(250,249,249,1) 0%,
    rgba(255,255,255,0.92) 60%,
    rgba(245,243,243,0.85) 100%
  );
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.6), 
              inset 0 -1px 3px rgba(0,0,0,0.04),
              0 12px 24px rgba(0,0,0,0.05);
  border-radius: 0 32px 32px 0;
  position: relative;
}

/* Add a faint light gradient line between image and text (like Apple separation) */
.hero::after {
  content: "";
  position: absolute;
  top: 0;
  left: 59.8%;
  width: 1px;
  height: 100%;
  background: linear-gradient(
    to bottom,
    rgba(255,255,255,0.5) 0%,
    rgba(0,0,0,0.08) 100%
  );
  z-index: 2;
  opacity: 0.5;
}

/* Make the inner text block subtly ‚Äúfloat‚Äù */
.hero-inner {
  background: rgba(255,255,255,0.65);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 2.5rem 3rem;
  box-shadow: 0 8px 32px rgba(0,0,0,0.06);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.hero-inner:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 40px rgba(0,0,0,0.1);
}

/* Typography refinement */
.hero-inner h1 {
  font-size: 2.7rem;
  font-weight: 700;
  color: #111;
  letter-spacing: -0.02em;
  text-shadow: 0 1px 2px rgba(255,255,255,0.8);
}

.hero-inner .lead {
  font-size: 1.1rem;
  line-height: 1.7;
  color: #333;
  text-shadow: 0 1px 2px rgba(255,255,255,0.7);
}

/* Slight highlight around key words (optional luxury feel) */
.hero-inner strong {
  background: linear-gradient(90deg, #e2b9f3, #d8c7ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.hero .bg {
  transform: scale(1.02);
  transition: transform 0.8s ease, opacity 0.6s ease;
}
.hero:hover .bg {
  transform: scale(1.06);
}

/* image side (keeps id heroBg the same so JS still works) */
.hero .bg {
  position: relative;
  width: 45%;
  height: 100%;
  background-size: cover;
  background-position: center top;
  background-repeat: no-repeat;
  background-color: #f6f2f3;
  transition: opacity 0.6s ease;
  overflow: hidden;
}

/* soft gradient overlay to blend with text side */
.hero .bg::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to right,
    rgba(246, 242, 243, 0) 50%,
    rgba(246, 242, 243, 0.9) 95%
  );
  pointer-events: none;
}

/* text / card side */
.hero-card {
  position: relative;
  z-index: 2;
  width: 50%;              /* right half */
  padding: 36px 40px;     /* feel free to tweak */
  display: flex;
  align-items: center;    /* center text vertically */
  justify-content: space-between;
  box-sizing: border-box;
  background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.42));
}

/* keep hero-left styling but allow it to sit within hero-card */
.hero-left {
  max-width: 100%;
  background: transparent; /* we already have bg for hero-card */
  backdrop-filter: none;
  border-radius: 8px;
  padding: 0;
  box-shadow: none;
}
.hero-left h1 { margin: 0 0 6px; font-size: 28px; color: var(--heading); }
.hero-left p.lead { margin:0; color:var(--muted); font-size:14px; line-height:1.45; }

/* Optional: small right-side program box stays aligned */
.hero-right { display:flex; gap:10px; align-items:center; }

/* ---- END: split-hero CSS ---- */

.hero .overlay{
  position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(20,16,16,0.08) 0%, rgba(255,255,255,0.12) 60%, rgba(255,255,255,0.75) 100%);
  pointer-events:none;
}

.hero-left{
  max-width:720px;
  background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.42));
  backdrop-filter: blur(6px);
  border-radius:12px;
  padding:18px 22px;
  box-shadow: 0 6px 18px rgba(20,18,16,0.06);
}
.hero-left h1{ margin:0 0 6px; font-size:28px; color:var(--heading); }
.hero-left p.lead{ margin:0; color:var(--muted); font-size:14px; line-height:1.45; }

.hero-right{ display:flex; gap:10px; align-items:center; }
/* === MOBILE HERO FIX FOR SPLIT LAYOUT === */
@media (max-width: 900px) {
  .hero {
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: auto;
    min-height: unset;
    border-radius: 20px;
    overflow: hidden;
    background: #fff;
  }

  .hero .bg {
    width: 100%;
    height: 260px;
    border-radius: 20px 20px 0 0;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }

  .hero .bg::after {
    background: linear-gradient(
      to top,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0) 100%
    );
  }

  .hero-card {
    width: 100%;
    padding: 24px 20px;
    background: #faf9f9;
    border-radius: 0 0 20px 20px;
    box-shadow: none;
    text-align: center;
    justify-content: center;
  }

  .hero-inner {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(8px);
    border-radius: 16px;
    padding: 1.5rem 1.2rem;
  }

  .hero-inner h1 {
    font-size: 2rem;
  }

  .hero-inner .lead {
    font-size: 1rem;
    line-height: 1.55;
  }

  .hero .bg {
    transform: scale(1.02);
    transition: transform 0.8s ease, opacity 0.6s ease;
  }

  .hero:hover .bg {
    transform: scale(1.05);
  }
}
/* Tabs */
.tabs{ margin-top:18px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
.pill{ padding:10px 16px; border-radius:999px; background:transparent; border:1px solid rgba(42,38,36,0.06); cursor:pointer; font-weight:600; color:var(--muted); transition: all 0.25s ease; }
.pill.active{ background: linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:white; border-color:transparent; transform:translateY(-2px); }

/* Main card style */
main{ margin-top:20px; }
.section{ margin-top:18px; background:var(--card); border-radius:18px; padding:18px; box-shadow:var(--shadow); border:1px solid rgba(42,38,36,0.03); }
.section h2{ margin:0 0 12px; color:var(--heading); font-size:18px; }

/* Stats */
.stats{ display:grid; grid-template-columns: repeat(4,1fr); gap:14px; margin-top:12px; }
.stat{ background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.45)); padding:14px; border-radius:14px; text-align:left; border:1px solid rgba(42,38,36,0.03); }
.stat .num{ font-size:20px; color:var(--accent-2); font-weight:700; }
.stat .lbl{ font-size:11px; color:var(--muted); text-transform:uppercase; margin-top:6px; }

/* Info cards */
.info-cards{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:16px; margin-top:16px; }
.info-card{ padding:18px; border-radius:14px; background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.45)); border:1px solid rgba(42,38,36,0.02); }
.info-card h3{ margin:0 0 10px; color:var(--heading); font-size:15px; }

/* Selectors */
.selector-row{ display:flex; gap:10px; margin-bottom:12px; overflow:auto; padding-bottom:6px; }
.day-grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:8px; margin-bottom:12px; }
.day{ text-align:center; padding:8px 6px; border-radius:10px; font-size:12px; border:1px solid rgba(42,38,36,0.04); background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(250,250,248,0.9)); cursor:pointer; }
.day.active{ background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:white; font-weight:700; border-color:transparent; }

/* Fitness table */
.exercise-table{ width:100%; border-collapse:collapse; margin-top:10px; font-size:14px; }
.exercise-table thead th{ text-align:left; padding:10px; color:var(--muted); font-weight:600; font-size:13px; border-bottom:1px dashed rgba(42,38,36,0.06); }
.exercise-table tbody td{ padding:10px; vertical-align:top; border-bottom:1px solid rgba(42,38,36,0.03); }
/* === Premium Compact Fitness Table (Balanced Layout + Superset Support) === */
/* === COMPACT FITNESS TABLE ‚Äì less whitespace, luxury alignment === */
.exercise-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
  font-size: 14px;
  table-layout: fixed; /* Key fix: controls column widths */
}

/* ========== FITNESS TABLE (Luxury Refined) ========== */
.exercise-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
  font-size: 14px;
  border-radius: 12px;
  overflow: hidden;
}

.exercise-table thead th {
  text-align: left;
  padding: 12px 10px;
  color: var(--muted);
  font-weight: 600;
  font-size: 13px;
  border-bottom: 1px dashed rgba(42,38,36,0.06);
  background: linear-gradient(90deg, rgba(202,182,202,0.2), rgba(221,208,221,0.1));
}

.exercise-table tbody td {
  padding: 10px 12px;
  vertical-align: middle; /* ‚úÖ vertically center everything */
  border-bottom: 1px solid rgba(42,38,36,0.04);
}

/* Align text cells more nicely */
.exercise-table td:first-child {
  font-weight: 500;
  color: var(--text);
}

/* Reduce unnecessary width */
.exercise-table th:nth-child(2),
.exercise-table td:nth-child(2) {
  width: 100px;
  text-align: center;
}

/* Form tips cell slightly wider */
.exercise-table th:nth-child(3),
.exercise-table td:nth-child(3) {
  width: 45%;
}

/* ========== VIDEO CELL FIX ========== */
.exercise-table .video-cell {
  display: flex;
  align-items: center;       /* ‚úÖ vertically center */
  justify-content: flex-start;
  gap: 8px;
  flex-wrap: wrap;
}

/* If you‚Äôll later have multiple videos per exercise */
.exercise-table .video-cell.multiple {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  align-items: center;
  justify-items: center;
  gap: 10px;
}

/* Thumbnail style */
.exercise-table .video-cell img {
  border-radius: 10px;
  width: 120px;              /* adjust size here */
  height: auto;
  object-fit: cover;
  box-shadow: 0 3px 6px rgba(0,0,0,0.08);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.exercise-table .video-cell img:hover {
  transform: scale(1.03);
  box-shadow: 0 4px 10px rgba(0,0,0,0.12);
}

/* Play icon overlay */
.exercise-table .video-cell .play-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 22px;
  opacity: 0.9;
}
/* Buttons */
.btn{ padding:8px 12px; border-radius:10px; border:1px solid rgba(42,38,36,0.06); cursor:pointer; font-weight:600; font-size:13px; transition: all 0.18s ease; }
.btn.primary{ background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:white; border-color:transparent; box-shadow:0 10px 28px rgba(201,160,200,0.08); }
.btn.danger{ background:#ff6b6b; color:white; border-color:transparent; }
.btn.success{ background:#28d79a; color:white; border-color:transparent; }

.video-wrap{ margin-top:8px; border-radius:8px; overflow:hidden; border:1px solid rgba(42,38,36,0.04); background:rgba(255,255,255,0.95); display:none; }

/* Admin */
.admin-panel{ position:fixed; top:20px; right:20px; z-index:1200; background:var(--card); padding:14px; border-radius:12px; box-shadow:0 12px 36px rgba(0,0,0,0.18); border:2px solid var(--accent-1); display:none; width:320px; }
.admin-section{ display:none; margin-top:10px; padding:10px; background:rgba(255,255,255,0.6); border-radius:8px; }
.user-hidden { display:none !important; }
.admin-mode .editable{ position:relative; }
.admin-mode .editable:hover::after{ content: "‚úé"; position:absolute; top:-8px; right:-8px; background:var(--accent-1); color:white; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px; cursor:pointer; }
.admin-mode [contenteditable="true"]{ outline:1px dashed rgba(204,160,170,0.6); padding:2px 6px; border-radius:6px; }

/* Footer social */
.footer-social{ display:flex; gap:12px; align-items:center; justify-content:center; margin-top:18px; }
.social-btn{ display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:10px; background:rgba(255,255,255,0.6); border:1px solid rgba(42,38,36,0.04); color:var(--heading); text-decoration:none; }

/* responsive */
@media (max-width:900px){
  .hero{ height:44vh; }
  .stats{ grid-template-columns:repeat(2,1fr); }
  .meals{ grid-template-columns:1fr; }
  .admin-panel{ width:90%; left:5%; right:5%; }
}
/* --- Extra Mobile Responsiveness (phones and small devices) --- */
@media (max-width: 768px) {
  header.site-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .site-header .brand {
    text-align: left;
  }

  .site-header .title {
    font-size: 1.4rem;
  }

  .site-header .tag {
    font-size: 0.9rem;
  }

  .wrap {
    padding: 12px;
  }

  .hero {
    height: auto;
    text-align: center;
  }

  .hero-section {
    flex-direction: column;
    align-items: center;
  }

  .hero-section img {
    max-width: 100%;
    border-radius: 12px;
  }

  .content-card, .program-section, .fitness-day, .nutrition-day {
    width: 100%;
    padding: 14px;
    box-sizing: border-box;
  }

  .btn, .pill {
    width: 100%;
    font-size: 0.95rem;
  }

  .admin-panel {
    right: 12px;
    bottom: 12px;
    max-width: 90%;
  }
}

@media (max-width: 480px) {
  .site-header .title {
    font-size: 1.2rem;
  }

  .site-header .tag {
    font-size: 0.8rem;
  }

  h1, h2, h3 {
    font-size: 1rem;
  }

  .btn, .pill {
    font-size: 0.9rem;
    padding: 8px 10px;
  }

  input, textarea {
    font-size: 0.9rem;
  }
}
/* --- Video Thumbnail Responsive Fix --- */
.video-thumb {
  width: 100%;
  max-width: 240px;
  height: auto;
  aspect-ratio: 16 / 9;
}

.video-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* For very small screens (iPhones and small Androids) */
@media (max-width: 480px) {
  .video-thumb {
    max-width: 180px;
    aspect-ratio: 16 / 9;
    margin: 0 auto;
  }
}

/* --- YouTube thumbnail style (compact preview) --- */
.video-thumb {
  position: relative;
  display: block;
  width: 100%;
  max-width: 220px;
  border-radius: 10px;
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.video-thumb img {
  width: 100%;
  display: block;
  border-radius: 10px;
}
.video-thumb .play-overlay {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.6);
  color: white;
  border-radius: 50%;
  width: 46px; height: 46px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  pointer-events: none;
}
.video-thumb:hover {
  transform: scale(1.03);
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}
/* === REFINED PREMIUM HERO (wider image, balanced layout) === */
.hero {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 80vh;
  min-height: 550px;
  position: relative;
  border-radius: 32px;
  overflow: hidden;
  box-shadow: 0 12px 40px rgba(0,0,0,0.08);
  background: #faf9f9;
}

/* Left: image gets 60% width now */
.hero-image {
  flex: 0 0 60%;
  width: 60%;
  height: 100%;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  transition: transform 1.2s ease, filter 0.6s ease;
  filter: brightness(0.96) contrast(1.02);
}
.hero:hover .hero-image {
  transform: scale(1.04);
}

/* Gradient to softly blend into the text area */
.hero-gradient {
  position: absolute;
  left: 55%;
  top: 0;
  width: 20%;
  height: 100%;
  background: linear-gradient(
    90deg,
    rgba(250,249,249,0) 0%,
    rgba(250,249,249,0.5) 50%,
    rgba(250,249,249,1) 100%
  );
  z-index: 1;
}

/* Right: content tighter and vertically centered */
.hero-content {
  flex: 0 0 40%;
  width: 40%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  background: #faf9f9;
  padding: 2.5rem 3.5rem;
  z-index: 2;
}

.hero-inner {
  max-width: 480px;
}

.hero-inner h1 {
  font-size: 2.6rem;
  font-weight: 700;
  color: #1e1e1e;
  margin-bottom: 1rem;
}

.hero-inner .lead {
  font-size: 1.05rem;
  line-height: 1.6;
  color: #333;
  margin-bottom: 1.8rem;
}

.program-info .label {
  display: block;
  font-size: 0.85rem;
  color: #777;
  margin-bottom: 0.2rem;
}
.program-info strong {
  font-size: 1.1rem;
  font-weight: 700;
  color: #111;
}

/* Subtle lift animation for text */
.hero-inner {
  animation: fadeUp 0.8s ease forwards;
  opacity: 0;
  transform: translateY(15px);
}
@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive adjustments */
@media (max-width: 992px) {
  .hero {
    flex-direction: column;
    height: auto;
  }

  .hero-image {
    width: 100%;
    height: 340px;
    border-radius: 24px 24px 0 0;
  }

  .hero-gradient {
    display: none;
  }

  .hero-content {
    width: 100%;
    padding: 2rem;
    border-radius: 0 0 24px 24px;
  }

  .hero-inner h1 {
    font-size: 2.2rem;
  }
}
/* === Optional Luxury Micro-Enhancements === */

/* 1Ô∏è‚É£ Slight overlap: pull text 3% over the image */
.hero-content {
  margin-left: -3%;
  z-index: 3;
}

/* 2Ô∏è‚É£ Soft ambient glow animation on background light */
.hero::before {
  animation: lightPulse 8s ease-in-out infinite alternate;
}
@keyframes lightPulse {
  0%   { opacity: 0.3; transform: scale(1); }
  100% { opacity: 0.6; transform: scale(1.03); }
}
/* === FINAL HERO MOBILE FIX (image visible + responsive layout) === */
@media (max-width: 768px) {
  .hero {
    flex-direction: column;
    height: auto;
    min-height: unset;
    border-radius: 24px;
    overflow: hidden;
  }

  .hero-image {
    flex: none;
    width: 100%;
    height: 280px;
    border-radius: 24px 24px 0 0;
    background-size: cover;
    background-position: center;
    display: block; /* ensure image stays visible */
  }

  .hero-gradient {
    display: none;
  }

  .hero-content {
    flex: none;
    width: 100%;
    padding: 1.8rem 1.2rem;
    text-align: center;
    border-radius: 0 0 24px 24px;
    background: #faf9f9;
  }

  .hero-inner h1 {
    font-size: 1.8rem;
  }

  .hero-inner .lead {
    font-size: 1rem;
  }
}
/* === FITNESS MOBILE LAYOUT FIX === */
@media (max-width: 768px) {
  .selector-row, .day-grid {
    flex-wrap: wrap;
    justify-content: center;
    overflow-x: auto;
  }

  .pill {
    flex: 1 1 auto;
    font-size: 0.9rem;
    padding: 8px 10px;
  }

  .day {
    padding: 6px;
    font-size: 12px;
  }

  .exercise-table thead {
    display: none;
  }

  .exercise-table,
  .exercise-table tbody,
  .exercise-table tr,
  .exercise-table td {
    display: block;
    width: 100%;
  }

  .exercise-table tr {
    margin-bottom: 14px;
    background: rgba(255,255,255,0.7);
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    padding: 10px;
  }

  .exercise-table td {
    border: none;
    padding: 6px 0;
    text-align: left;
  }

  .exercise-table td::before {
    content: attr(data-label);
    display: block;
    font-weight: 600;
    color: var(--muted);
    font-size: 12px;
    margin-bottom: 3px;
  }
}
/* === LUXURY MOBILE FITNESS DESIGN === */
@media (max-width: 768px) {
  /* Compact, scrollable week buttons */
  #weekSelector {
    display: flex;
    overflow-x: auto;
    gap: 8px;
    padding-bottom: 8px;
    scrollbar-width: none;
  }
  #weekSelector::-webkit-scrollbar {
    display: none;
  }
  #weekSelector .pill {
    flex: 0 0 auto;
    border-radius: 20px;
    padding: 10px 18px;
    font-size: 0.95rem;
  }

  /* Compact horizontal day buttons */
  #dayGrid {
    display: flex;
    justify-content: space-between;
    gap: 6px;
    margin-top: 6px;
  }
  .day {
    flex: 1;
    text-align: center;
    padding: 8px 0;
    border-radius: 12px;
    font-size: 0.9rem;
  }

  /* Exercises as elegant cards */
  .exercise-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 12px;
  }
  .exercise-table thead {
    display: none;
  }
  .exercise-table tbody tr {
    display: flex;
    flex-direction: column;
    background: rgba(255,255,255,0.85);
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    padding: 14px 16px;
    margin-bottom: 12px;
  }

  .exercise-table td {
    border: none;
    padding: 4px 0;
    text-align: left;
    font-size: 0.95rem;
    color: #2a2a2a;
  }

  .exercise-table td[data-label="YouTube / Video"] {
    margin-top: 10px;
  }

  .video-thumb img {
    width: 100%;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
}
/* === LUXURY MOBILE FITNESS UPGRADE === */
@media (max-width: 768px) {
  section {
    background: linear-gradient(180deg, #faf8f8 0%, #fff 60%);
  }

  /* Sleeker week scroll */
  #weekSelector {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    padding: 8px 0 14px;
    scrollbar-width: none;
  }
  #weekSelector::-webkit-scrollbar { display: none; }

  #weekSelector .pill {
    flex: 0 0 auto;
    border-radius: 24px;
    padding: 10px 20px;
    background: linear-gradient(90deg, #e6d0f4, #d9c8ff);
    color: #352e35;
    font-weight: 600;
    font-size: 0.95rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
  }
  #weekSelector .pill.active {
    background: linear-gradient(90deg, #d9c8ff, #f2e7ff);
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  }

  /* Compact day pills */
  #dayGrid {
    display: flex;
    justify-content: space-between;
    gap: 6px;
    margin-bottom: 8px;
  }
  .day {
    flex: 1;
    text-align: center;
    background: #f8f5fa;
    borde

</style>
</head>
<body>
<!-- Admin Panel -->
<!-- Admin Panel -->
<div class="admin-panel" id="adminPanel" aria-hidden="true">
  <div style="display:flex; gap:8px; align-items:center; justify-content:space-between; margin-bottom:10px;">
    <button class="btn primary" id="adminToggle">Exit Admin Mode</button>
  </div>

  <div class="admin-section" id="adminControls">
    <h3 style="margin:0 0 10px; font-size:14px;">Admin Controls</h3>

    <!-- Color Palette -->
    <div class="color-picker" style="display:flex; gap:5px; margin-bottom:10px;">
      <div class="color-swatch active" style="background:#fdfcfb;" data-var="bg"></div>
      <div class="color-swatch" style="background:#ffffff;" data-var="card"></div>
      <div class="color-swatch" style="background:#5a5552;" data-var="muted"></div>
      <div class="color-swatch" style="background:#2a2624;" data-var="heading"></div>
      <div class="color-swatch" style="background:#e4b1ab;" data-var="accent-1"></div>
      <div class="color-swatch" style="background:#d3a0c8;" data-var="accent-2"></div>
    </div>

    <!-- Hero Images -->
    <label style="font-size:13px;color:var(--muted);">Hero Images (placeholders)</label>
    <div style="display:flex; flex-direction:column; gap:6px; margin:8px 0 14px 0;">
      <input id="heroImgOverview" placeholder="Overview image URL" style="flex:1; padding:8px; border-radius:8px; border:1px solid rgba(0,0,0,0.06)">
      <input id="heroImgProgram" placeholder="Program Info image URL" style="flex:1; padding:8px; border-radius:8px; border:1px solid rgba(0,0,0,0.06)">
      <input id="heroImgFitness" placeholder="Fitness image URL" style="flex:1; padding:8px; border-radius:8px; border:1px solid rgba(0,0,0,0.06)">
      <input id="heroImgNutrition" placeholder="Nutrition image URL" style="flex:1; padding:8px; border-radius:8px; border:1px solid rgba(0,0,0,0.06)">
    </div>

    <!-- Social Links -->
    <label style="font-size:13px;color:var(--muted);">Social Links</label>
    <div style="display:flex; flex-direction:column; gap:6px; margin-bottom:14px;">
      <input id="socialInsta" placeholder="Instagram URL" style="flex:1; padding:8px; border-radius:8px; border:1px solid rgba(0,0,0,0.06)">
      <input id="socialTiktok" placeholder="TikTok URL" style="flex:1; padding:8px; border-radius:8px; border:1px solid rgba(0,0,0,0.06)">
    </div>

    <!-- Core Admin Buttons -->
    <div style="display:flex; flex-direction:column; gap:8px;">
      <button class="btn primary admin-btn" id="saveAllBtn">üíæ Save All Changes</button>
      <button class="btn" id="exportBtn">üì¶ Export Data as JSON</button>
      <button class="btn" id="downloadHtmlBtn">üì• Download Complete HTML</button>
      <button class="btn danger" id="resetAllBtn">üßπ Reset to Default</button>
    </div>
  </div>
</div>


<div class="wrap">
  <header class="site-header" role="banner">
    <div class="brand">
      <div class="title editable" data-id="siteTitle">Sculpted by Klea</div>
      <div class="tag editable" data-id="siteTag">Your Personal Wellness Journey</div>
    </div>
  

    <div style="display:flex; gap:10px; align-items:center;">
      <button class="pill active editable" data-id="headerOverview" data-tab="overview">Overview</button>
      <button class="pill editable" data-id="headerProgramInfo" data-tab="programInfo">Program Info</button>
      <button class="pill editable" data-id="headerFitness" data-tab="fitness">Fitness</button>
      <button class="pill editable" data-id="headerNutrition" data-tab="nutrition">Nutrition</button>
    </div>
  </header>

  <section id="homeHero" class="hero" aria-label="Hero">
  <div id="heroBg" class="hero-image" style="background-image: url('https://i.postimg.cc/Yr55X3Px/1.jpg');"></div>

  <div class="hero-gradient"></div>

  <div class="hero-content">
    <div class="hero-inner">
      <h1 class="editable" data-id="heroTitle">Sculpted by Klea</h1>
      <p class="lead editable" data-id="heroDesc">
        A 4-week luxury transformation plan combining smart nutrition and
        high-impact workouts ‚Äî designed to tone, build, and refine.
      </p>
      <div class="program-info">
        <span class="label">Program</span>
        <strong>4 Weeks ‚Ä¢ 28 Days</strong>
      </div>
    </div>
  </div>
</section>
  <div class="tabs" id="topTabs" role="tablist" aria-label="Main tabs">
    <!-- tabs already present in header; tabs are visually helper -->
  </div>

  <main>
    <section id="overview" class="section" aria-labelledby="overview-title">
      <h2 id="overview-title" class="editable" data-id="overviewTitle">Program Overview</h2>
      <p class="muted editable" data-id="overviewDesc">This program uses progressive training and balanced nutrition over 4 weeks.</p>

      <div class="stats">
        <div class="stat">
          <div class="num editable" data-id="statWeeks">4</div>
          <div class="lbl editable" data-id="statWeeksLabel">Weeks</div>
        </div>
        <div class="stat">
          <div class="num editable" data-id="statDays">28</div>
          <div class="lbl editable" data-id="statDaysLabel">Days</div>
        </div>
        <div class="stat">
          <div class="num editable" data-id="statCalories">~1600</div>
          <div class="lbl editable" data-id="statCaloriesLabel">Calories</div>
        </div>
        <div class="stat">
          <div class="num editable" data-id="statWorkouts">5-6</div>
          <div class="lbl editable" data-id="statWorkoutsLabel">Workouts / Week</div>
        </div>
      </div>

      <div class="info-cards">
        <div class="info-card">
          <h3 class="editable" data-id="overviewCard1Title">What to Expect</h3>
          <div class="content editable" data-id="overviewCard1">Progressive overload, balanced nutrition, and weekly check-ins.</div>
        </div>
        <div class="info-card">
          <h3 class="editable" data-id="overviewCard2Title">Who This Is For</h3>
          <div class="content editable" data-id="overviewCard2">Individuals seeking a premium body-composition transformation.</div>
        </div>
        <div class="info-card">
          <h3 class="editable" data-id="overviewCard3Title">Time Commitment</h3>
          <div class="content editable" data-id="overviewCard3">5-6 structured workouts per week, 30-60 minutes each.</div>
        </div>
        <div class="info-card">
          <h3 class="editable" data-id="overviewCard4Title">Support</h3>
          <div class="content editable" data-id="overviewCard4">Nutritional templates, exercise videos, and routine checks.</div>
        </div>
      </div>
    </section>

    <section id="programInfo" class="section" style="display:none;">
      <h2 class="editable" data-id="programInfoTitle">Program Information & Guidelines</h2>
      <p class="muted editable" data-id="programInfoDesc">Essential information to help you succeed in your transformation journey.</p>

      <div class="info-cards">
        <div class="info-card">
          <h3 class="editable" data-id="nutritionGuideTitle">Nutritional Guidance</h3>
          <div class="content editable" data-id="nutritionGuideContent">
            <p><strong>Calorie Targets:</strong> Maintain a daily intake of ~1600 calories.</p>
          </div>
        </div>

        <div class="info-card">
          <h3 class="editable" data-id="trainingGuideTitle">Training Principles</h3>
          <div class="content editable" data-id="trainingGuideContent">
            <p><strong>Progressive Overload:</strong> Increase load each week judiciously.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="fitness" class="section" style="display:none;">
      <h2 class="editable" data-id="fitnessTitle">Fitness ‚Äî Program</h2>
      <p class="muted editable" data-id="fitnessDesc">Select a training week and day to view your workout plan.</p>

      <div class="selector-row" id="fitnessWeekSelector"></div>
      <div class="day-grid" id="fitnessDayGrid"></div>

      <!-- Admin-only controls (hidden by default) -->
      <div id="fitnessAdminControls" style="margin-top:12px; display:none; gap:8px; align-items:center; flex-wrap:wrap;">
        <button class="btn primary" id="saveFitnessBtn">Save Fitness</button>
        <button class="btn success" id="addFitnessWeekBtn">Add New Week</button>
        <button class="btn danger" id="deleteFitnessWeekBtn">Delete This Week</button>
        <button class="btn success" id="addExerciseBtn">+ Add Exercise</button>
        <div class="editable-hint">Click on exercise fields to edit. Changes auto-save on blur.</div>
      </div>

      <div id="workoutContainer">
        <div class="workout-panel">
          <table class="exercise-table" aria-label="Exercises">
            <thead>
              <tr>
                <th class="editable" data-id="exerciseHeader">Exercise</th>
                <th class="editable" data-id="setsHeader" style="width:110px">Sets x Reps</th>
                <th class="editable" data-id="formHeader">Form tips</th>
                <th class="editable" data-id="videoHeader" style="width:260px">YouTube / Video</th>
                <th style="width:80px; display:none;" class="user-hidden">Actions</th>
              </tr>
            </thead>
            <tbody id="exerciseBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="nutrition" class="section" style="display:none;">
      <h2 class="editable" data-id="nutritionTitle">Nutrition ‚Äî 4-Week Plan</h2>
      <p class="muted editable" data-id="nutritionDesc">Choose a week, then a day to view your meal plan.</p>

      <div class="selector-row" id="weekSelector"></div>
      <div class="day-grid" id="dayGrid"></div>
      <div id="nutritionDayPanel"></div>

      <div style="margin-top:12px; display:flex; gap:8px; align-items:center; flex-wrap:wrap;" class="user-hidden">
        <button class="btn primary editable" data-id="saveNutritionText" id="saveNutritionBtn">Save Nutrition</button>
        <button class="btn success" id="addNutritionDayBtn">Add New Day</button>
        <button class="btn danger" id="deleteNutritionDayBtn">Delete This Day</button>
        <div class="editable-hint editable" data-id="nutritionHint">Edits auto-save on blur for the meal and macro fields.</div>
      </div>
    </section>

  </main>

  <footer style="text-align:center; margin-top:24px; color:var(--muted);">
    <div class="footer-social">
      <a id="linkInsta" class="social-btn" href="#" target="_blank" rel="noopener noreferrer">
        <!-- Minimal outline icons (elegant) -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#2b2423" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="5"/><path d="M16 11.37a4 4 0 1 1-4.63-4"/></svg>
        <span class="editable" data-id="socialInstaLabel">Instagram</span>
      </a>
      <a id="linkTiktok" class="social-btn" href="#" target="_blank" rel="noopener noreferrer">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#2b2423" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 9v6a3 3 0 0 0 3 3 3 3 0 0 0 3-3V7h3"/></svg>
        <span class="editable" data-id="socialTiktokLabel">TikTok</span>
      </a>
    </div>

    <div style="margin-top:12px;">
      <span class="editable" data-id="footerText">Made with care ‚Ä¢ Sculpted by Klea</span>
    </div>
  </footer>
</div>

<script>
/* ========== State & Defaults (unchanged core logic) ========== */
const ADMIN_PASSWORD = "klea2024";

const state = {
  activeTab: 'overview',
  isAdmin: false,
  nutritionData: {},
  fitnessData: {},
  overviewStats: { weeks: '4', days: '28', calories: '~1600', workouts: '5-6' },
  programSettings: { fitnessWeeks: 4, nutritionWeeks: 4 },
 siteContent: {
  heroImages: {
  overview: "data:image/jpeg;base64,{{IMG1}}",
  programInfo: "data:image/jpeg;base64,{{IMG2}}",
  fitness: "data:image/jpeg;base64,{{IMG3}}",
  nutrition: "data:image/jpeg;base64,{{IMG4}}"
},
    socialInsta: '',
    socialTiktok: ''
  }
};

let activeWeek = 1;
let activeDay = 1;
let activeFitnessWeek = 1;
let activeFitnessDay = 1;

/* ---------- Helpers ---------- */
function persistSiteContent(){
  // Save editable content blocks
  document.querySelectorAll('.editable').forEach(el => {
    const id = el.dataset.id;
    if (id) state.siteContent[id] = el.innerHTML;
  });
  // Save hero images & social URLs also stored in state.siteContent
  state.siteContent.heroImages = state.siteContent.heroImages || state.siteContent.heroImages;
  localStorage.setItem('sculpted_site_content_v13', JSON.stringify(state.siteContent));
}

function saveAll(){
  localStorage.setItem('sculpted_nutrition_v13', JSON.stringify(state.nutritionData));
  localStorage.setItem('sculpted_fitness_v13', JSON.stringify(state.fitnessData));
  localStorage.setItem('sculpted_program_settings_v13', JSON.stringify(state.programSettings));
  persistSiteContent();
}

/* ---------- Load ---------- */
function loadAll(){
  const rawN = localStorage.getItem('sculpted_nutrition_v13');
  const rawF = localStorage.getItem('sculpted_fitness_v13');
  const rawP = localStorage.getItem('sculpted_program_settings_v13');
  const rawS = localStorage.getItem('sculpted_site_content_v13');
  if (rawN) state.nutritionData = JSON.parse(rawN);
  if (rawF) state.fitnessData = JSON.parse(rawF);
  if (rawP) state.programSettings = JSON.parse(rawP);
  if (rawS) {
    const s = JSON.parse(rawS);
    // merge preserved site content into state.siteContent (non-destructive)
    state.siteContent = Object.assign({}, state.siteContent, s);
    // If hero images stored inside siteContent, prefer those
    if (state.siteContent.heroImages) {
      state.siteContent.heroImages = Object.assign({}, state.siteContent.heroImages);
    }
    if (state.siteContent.socialInsta) {
      state.siteContent.socialInsta = state.siteContent.socialInsta;
    }
    if (state.siteContent.socialTiktok) {
      state.siteContent.socialTiktok = state.siteContent.socialTiktok;
    }
  }
}

/* ---------- Defaults ---------- */
function initDefaults(){
  // Ensure 4 weeks of fitness with 7 days each
  for(let week = 1; week <= 4; week++){
    state.fitnessData[week] = state.fitnessData[week] || {};
    for(let day = 1; day <= 7; day++){
      state.fitnessData[week][day] = state.fitnessData[week][day] || [];
    }
  }

  // Give Week 1 Day 1 some default exercises if empty
  if(!state.fitnessData[1]) state.fitnessData[1] = {};
  if(!state.fitnessData[1][1]) state.fitnessData[1][1] = [];
  if(state.fitnessData[1][1].length === 0){
    state.fitnessData[1][1] = [
      { name: 'Barbell Back Squat', sets: '4 x 6-8', form: 'Chest up, knees tracking toes, depth to parallel', youtube: '' },
      { name: 'Romanian Deadlift', sets: '3 x 8-10', form: 'Hinge from hips, soft knees, bar close to legs', youtube: '' },
      { name: 'Leg Press', sets: '3 x 10-12', form: 'Feet shoulder width, dont lock knees at top', youtube: '' }
    ];
  }

  // Nutrition defaults same as before
  for(let w=1; w<=state.programSettings.nutritionWeeks; w++){
    state.nutritionData[w] = state.nutritionData[w] || {};
    for(let d=1; d<=7; d++){
      if(!state.nutritionData[w][d]){
        state.nutritionData[w][d] = { meals: [
          { title: 'Breakfast', body: 'Oatmeal with berries and protein powder', macros: ['Protein: 25g','Carbs: 45g','Fat: 8g','Calories: 350'] },
          { title: 'Lunch', body: 'Grilled chicken salad with olive oil dressing', macros: ['Protein: 35g','Carbs: 15g','Fat: 12g','Calories: 320'] },
          { title: 'Dinner', body: 'Salmon with quinoa and steamed vegetables', macros: ['Protein: 30g','Carbs: 40g','Fat: 15g','Calories: 450'] },
          { title: 'Snack', body: 'Greek yogurt with almonds', macros: ['Protein: 20g','Carbs: 15g','Fat: 10g','Calories: 230'] }
        ] };
      }
    }
  }
}

/* ========== HERO IMAGE / TAB SYNC ========== */
function setHeroImageForTab(tab){
  const hero = document.getElementById('heroBg');
  const images = state.siteContent.heroImages || state.siteContent.heroImages || state.siteContent.heroImages || {
    overview: state.siteContent.heroImages?.overview || state.siteContent.heroImages_overview || state.siteContent.heroImages.overview,
  };
  // fallback to values in state.siteContent.heroImages or default mapping
  const mapping = Object.assign({
    overview: 'https://picsum.photos/id/1015/1600/900',
    programInfo: 'https://picsum.photos/id/1016/1600/900',
    fitness: 'https://picsum.photos/id/1011/1600/900',
    nutrition: 'https://picsum.photos/id/1025/1600/900'
  }, state.siteContent.heroImages || {});
  const url = mapping[tab] || mapping['overview'];
  hero.style.opacity = 0;
  setTimeout(()=> {
    hero.style.backgroundImage = `url('${url}')`;
    hero.style.opacity = 1;
  }, 120);
}

/* ========== Tabs ========== */
function setActiveTab(tab){
  state.activeTab = tab;
  document.querySelectorAll('[data-tab]').forEach(b => b.classList.toggle('active', b.dataset.tab === tab));
  document.getElementById('overview').style.display = (tab === 'overview' ? '' : 'none');
  document.getElementById('programInfo').style.display = (tab === 'programInfo' ? '' : 'none');
  document.getElementById('fitness').style.display = (tab === 'fitness' ? '' : 'none');
  document.getElementById('nutrition').style.display = (tab === 'nutrition' ? '' : 'none');

  // update hero image
  setHeroImageForTab(tab);

  if (tab === 'fitness') {
    renderFitnessWeekSelector();
    renderFitnessDays();
    renderExercises();
  } else if (tab === 'nutrition') {
    renderNutritionWeekSelector();
    renderNutritionDays();
    renderNutritionDay();
  }
}

document.addEventListener('click', (e) => {
  const t = e.target.closest('[data-tab]');
  if(t) setActiveTab(t.dataset.tab);
});

/* ========== FITNESS RENDERING (kept core logic) ========== */
function renderFitnessWeekSelector(){
  const container = document.getElementById('fitnessWeekSelector');
  container.innerHTML = '';
  const weeksCount = Math.max(state.programSettings.fitnessWeeks, Object.keys(state.fitnessData).length);

  for(let i=1; i<=weeksCount; i++){
    const btn = document.createElement('button');
    btn.className = `pill ${i===activeFitnessWeek?'active':''}`;
    btn.dataset.week = i;
    btn.textContent = `Week ${i}`;
    container.appendChild(btn);
  }

  container.querySelectorAll('[data-week]').forEach(b => {
    b.addEventListener('click', (e) => {
      activeFitnessWeek = Number(e.currentTarget.dataset.week);
      activeFitnessDay = 1;
      renderFitnessWeekSelector();
      renderFitnessDays();
      renderExercises();
    });
  });
}

function renderFitnessDays(){
  const container = document.getElementById('fitnessDayGrid');
  container.innerHTML = '';
  const dayNames = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];

  for(let i=1; i<=7; i++){
    const dayEl = document.createElement('div');
    dayEl.className = `day ${i===activeFitnessDay?'active':''}`;
    dayEl.dataset.day = i;
    dayEl.textContent = dayNames[i-1] || `Day ${i}`;
    container.appendChild(dayEl);
  }

  container.querySelectorAll('.day').forEach(day => {
    day.addEventListener('click', (e) => {
      activeFitnessDay = Number(e.currentTarget.dataset.day);
      renderFitnessDays();
      renderExercises();
    });
  });
}

function renderExercises(){
  const tbody = document.getElementById('exerciseBody');
  tbody.innerHTML = '';

  if (!state.fitnessData[activeFitnessWeek]) {
    state.fitnessData[activeFitnessWeek] = {};
  }
  if (!state.fitnessData[activeFitnessWeek][activeFitnessDay]) {
    state.fitnessData[activeFitnessWeek][activeFitnessDay] = [];
  }

  const exercises = state.fitnessData[activeFitnessWeek][activeFitnessDay];

  if (exercises.length === 0) {
    const emptyRow = document.createElement('tr');
    emptyRow.innerHTML = `
      <td colspan="${state.isAdmin ? 5 : 4}" style="text-align: center; padding: 20px; color: var(--muted);">
        No exercises planned for this day. ${state.isAdmin ? 'Add exercises using the button above.' : ''}
      </td>
    `;
    tbody.appendChild(emptyRow);
    return;
  }

  exercises.forEach((exercise, index) => {
    const row = document.createElement('tr');

    const nameCell = document.createElement('td');
    if (state.isAdmin) {
      nameCell.contentEditable = 'true';
      nameCell.textContent = exercise.name;
      nameCell.addEventListener('blur', (e) => {
        state.fitnessData[activeFitnessWeek][activeFitnessDay][index].name = e.target.textContent;
        saveAll();
      });
    } else {
      nameCell.textContent = exercise.name;
    }

    const setsCell = document.createElement('td');
    if (state.isAdmin) {
      setsCell.contentEditable = 'true';
      setsCell.textContent = exercise.sets;
      setsCell.addEventListener('blur', (e) => {
        state.fitnessData[activeFitnessWeek][activeFitnessDay][index].sets = e.target.textContent;
        saveAll();
      });
    } else {
      setsCell.textContent = exercise.sets;
    }

    const formCell = document.createElement('td');
    if (state.isAdmin) {
      formCell.contentEditable = 'true';
      formCell.textContent = exercise.form;
      formCell.addEventListener('blur', (e) => {
        state.fitnessData[activeFitnessWeek][activeFitnessDay][index].form = e.target.textContent;
        saveAll();
      });
    } else {
      formCell.textContent = exercise.form;
    }

    const videoCell = document.createElement('td');
    videoCell.className = 'video-cell'; // ‚úÖ add this line
    const videoContainer = document.createElement('div');
    videoContainer.style.display = 'flex';
    videoContainer.style.gap = '8px';
    videoContainer.style.alignItems = 'center';

    const videoInput = document.createElement('input');
    videoInput.type = 'text';
    videoInput.placeholder = 'YouTube URL or ID';
    videoInput.value = exercise.youtube || '';
    videoInput.style.flex = '1';
    videoInput.style.padding = '6px 8px';
    videoInput.style.border = '1px solid rgba(42,38,36,0.08)';
    videoInput.style.borderRadius = '6px';

    const previewBtn = document.createElement('button');
    previewBtn.className = 'btn';
    previewBtn.textContent = 'Preview';
    previewBtn.style.fontSize = '12px';
    previewBtn.style.padding = '6px 8px';

    const videoWrap = document.createElement('div');
    videoWrap.className = 'video-wrap';
    videoWrap.id = `video-${activeFitnessWeek}-${activeFitnessDay}-${index}`;

    if (state.isAdmin) {
      videoInput.addEventListener('blur', (e) => {
        state.fitnessData[activeFitnessWeek][activeFitnessDay][index].youtube = e.target.value;
        saveAll();
      });

      previewBtn.addEventListener('click', () => {
  const videoId = extractYouTubeId(videoInput.value);
  if (videoId) {
    videoWrap.style.display = 'block';
    videoWrap.innerHTML = `
      <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank" class="video-thumb" title="Open YouTube">
        <img src="https://img.youtube.com/vi/${videoId}/mqdefault.jpg" alt="YouTube thumbnail">
        <div class="play-overlay">‚ñ∂</div>
      </a>
    `;
  } else {
    videoWrap.style.display = 'none';
    videoWrap.innerHTML = '';
  }
});

    } else {
  // USER MODE ‚Äî show only the thumbnail (hide YouTube link + preview)
  videoContainer.style.display = 'none'; // hide URL input + preview button

  const videoId = extractYouTubeId(exercise.youtube);
  if (videoId) {
    videoWrap.style.display = 'block';
    videoWrap.innerHTML = `
      <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank" class="video-thumb" title="Watch on YouTube">
        <img src="https://img.youtube.com/vi/${videoId}/mqdefault.jpg" alt="YouTube thumbnail">
        <div class="play-overlay">‚ñ∂</div>
      </a>
    `;
  } else {
    videoWrap.style.display = 'none';
  }
}

    videoContainer.appendChild(videoInput);
    videoContainer.appendChild(previewBtn);
    videoCell.appendChild(videoContainer);
    videoCell.appendChild(videoWrap);

    const actionsCell = document.createElement('td');
    if (state.isAdmin) {
      const deleteBtn = document.createElement('button');
      deleteBtn.className = 'btn danger';
      deleteBtn.textContent = 'Delete';
      deleteBtn.style.fontSize = '12px';
      deleteBtn.style.padding = '6px 8px';
      deleteBtn.addEventListener('click', () => {
        if (confirm('Delete this exercise?')) {
          state.fitnessData[activeFitnessWeek][activeFitnessDay].splice(index, 1);
          renderExercises();
          saveAll();
        }
      });
      actionsCell.appendChild(deleteBtn);
    } else {
      actionsCell.style.display = 'none';
    }

    row.appendChild(nameCell);
    row.appendChild(setsCell);
    row.appendChild(formCell);
    row.appendChild(videoCell);
    row.appendChild(actionsCell);

    tbody.appendChild(row);
  });
}

function extractYouTubeId(urlOrId){
  if(!urlOrId) return '';
  if(!urlOrId.includes('youtube') && !urlOrId.includes('youtu.be') && !urlOrId.includes('/') && urlOrId.length < 20) {
    return urlOrId.trim();
  }

  let match = urlOrId.match(/[?&]v=([^&]{6,20})/);
  if(match && match[1]) return match[1];

  match = urlOrId.match(/youtu\.be\/([^?]{6,20})/);
  if(match && match[1]) return match[1];

  match = urlOrId.match(/\/embed\/([^?]{6,20})/);
  if(match && match[1]) return match[1];

  return '';
}

/* ========== CRUD (admin-only) ========== */
function addExercise(){
  if(!state.isAdmin) return;
  state.fitnessData[activeFitnessWeek][activeFitnessDay].push({
    name: 'New Exercise',
    sets: '3 x 10',
    form: 'Form tips...',
    youtube: ''
  });
  renderExercises();
  saveAll();
}

function addFitnessWeek(){
  if(!state.isAdmin) return;
  const weeks = Object.keys(state.fitnessData).map(Number);
  const newWeek = weeks.length > 0 ? Math.max(...weeks) + 1 : 1;
  state.fitnessData[newWeek] = {};
  state.programSettings.fitnessWeeks = newWeek;
  for(let day = 1; day <= 7; day++) state.fitnessData[newWeek][day] = [];
  activeFitnessWeek = newWeek;
  activeFitnessDay = 1;
  renderFitnessWeekSelector();
  renderFitnessDays();
  renderExercises();
  saveAll();
  alert(`Added Week ${newWeek}`);
}

function deleteFitnessWeek(){
  if(!state.isAdmin) return;
  const weeks = Object.keys(state.fitnessData).map(Number);
  if(weeks.length <= 1){ alert('Cannot delete the only week'); return; }
  if(confirm(`Delete Week ${activeFitnessWeek} and all its exercises?`)){
    delete state.fitnessData[activeFitnessWeek];
    state.programSettings.fitnessWeeks = weeks.length - 1;
    const remainingWeeks = Object.keys(state.fitnessData).map(Number).sort((a,b)=>a-b);
    activeFitnessWeek = remainingWeeks[0];
    activeFitnessDay = 1;
    renderFitnessWeekSelector();
    renderFitnessDays();
    renderExercises();
    saveAll();
    alert('Week deleted');
  }
}

/* ========== ADMIN MODE ========== */
function enableAdminMode(){
  state.isAdmin = true;
  document.body.classList.add('admin-mode');
  document.querySelectorAll('.user-hidden').forEach(el => el.style.display = '');
  document.querySelectorAll('.editable').forEach(el => el.setAttribute('contenteditable','true'));
  document.getElementById('adminPanel').style.display = 'block';
  document.getElementById('adminPanel').setAttribute('aria-hidden','false');
  document.getElementById('adminControls').style.display = 'block';

  // show fitness admin controls
  const fitControls = document.getElementById('fitnessAdminControls');
  if (fitControls) fitControls.style.display = 'flex';

  // rebind admin action buttons safely
  const addExerciseBtn = document.getElementById('addExerciseBtn');
  const addWeekBtn = document.getElementById('addFitnessWeekBtn');
  const deleteWeekBtn = document.getElementById('deleteFitnessWeekBtn');
  const saveFitnessBtn = document.getElementById('saveFitnessBtn');

  if (addExerciseBtn) addExerciseBtn.onclick = addExercise;
  if (addWeekBtn) addWeekBtn.onclick = addFitnessWeek;
  if (deleteWeekBtn) deleteWeekBtn.onclick = deleteFitnessWeek;
  if (saveFitnessBtn) saveFitnessBtn.onclick = () => { saveAll(); alert('Fitness data saved'); };

  // show delete column
  const deleteHeader = document.querySelector('.exercise-table thead th:last-child');
  if (deleteHeader) deleteHeader.style.display = 'table-cell';

  // populate admin inputs with current values
  document.getElementById('heroImgOverview').value = state.siteContent.heroImages?.overview || state.siteContent.heroImages_overview || '';
  document.getElementById('heroImgProgram').value = state.siteContent.heroImages?.programInfo || '';
  document.getElementById('heroImgFitness').value = state.siteContent.heroImages?.fitness || '';
  document.getElementById('heroImgNutrition').value = state.siteContent.heroImages?.nutrition || '';
  document.getElementById('socialInsta').value = state.siteContent.socialInsta || '';
  document.getElementById('socialTiktok').value = state.siteContent.socialTiktok || '';

  // Show admin-created quick controls
  renderFitnessWeekSelector();
  renderFitnessDays();
  renderExercises();
  renderNutritionWeekSelector();
  renderNutritionDays();
  renderNutritionDay();
}

function disableAdminMode(){
  state.isAdmin = false;
  document.body.classList.remove('admin-mode');
  document.querySelectorAll('.user-hidden').forEach(el => el.style.display = 'none');
  document.querySelectorAll('.editable').forEach(el => el.setAttribute('contenteditable','false'));
  document.getElementById('adminPanel').style.display = 'none';
  document.getElementById('adminPanel').setAttribute('aria-hidden','true');
  document.getElementById('adminControls').style.display = 'none';

  const fitControls = document.getElementById('fitnessAdminControls');
  if (fitControls) fitControls.style.display = 'none';

  // hide delete column
  const deleteHeader = document.querySelector('.exercise-table thead th:last-child');
  if (deleteHeader) deleteHeader.style.display = 'none';

  renderFitnessWeekSelector();
  renderFitnessDays();
  renderExercises();
  renderNutritionWeekSelector();
  renderNutritionDays();
  renderNutritionDay();
}

function toggleAdminMode(){
  if(!state.isAdmin){
    const pw = prompt('Enter admin password:');
    if(pw === ADMIN_PASSWORD){
      enableAdminMode();
      alert('Admin mode enabled');
    } else {
      alert('Incorrect password');
    }
  } else {
    disableAdminMode();
    alert('Admin mode disabled');
  }
}

/* ========== Nutrition Rendering (kept core) ========== */
function renderNutritionWeekSelector(){
  const container = document.getElementById('weekSelector');
  if (!container) return;
  container.innerHTML = '';
  const weeksCount = Math.max(state.programSettings.nutritionWeeks, Object.keys(state.nutritionData).length);
  for(let i=1; i<=weeksCount; i++){
    const btn = document.createElement('button');
    btn.className = `pill ${i===activeWeek?'active':''}`;
    btn.dataset.week = i;
    btn.textContent = `Week ${i}`;
    container.appendChild(btn);
  }
  container.querySelectorAll('[data-week]').forEach(b => {
    b.addEventListener('click', (e) => {
      activeWeek = Number(e.currentTarget.dataset.week);
      document.querySelectorAll('#weekSelector [data-week]').forEach(x => x.classList.toggle('active', Number(x.dataset.week) === activeWeek));
      renderNutritionDay();
    });
  });
}

function renderNutritionDays(){
  const container = document.getElementById('dayGrid');
  if (!container) return;
  container.innerHTML = '';
  const dayNames = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
  for(let i=1; i<=7; i++){
    const dayEl = document.createElement('div');
    dayEl.className = `day ${i===activeDay?'active':''}`;
    dayEl.dataset.day = i;
    dayEl.textContent = dayNames[i-1] || `Day ${i}`;
    container.appendChild(dayEl);
  }
  container.querySelectorAll('.day').forEach(day => {
    day.addEventListener('click', (e) => {
      activeDay = Number(e.currentTarget.dataset.day);
      document.querySelectorAll('#dayGrid .day').forEach(x => x.classList.toggle('active', Number(x.dataset.day) === activeDay));
      renderNutritionDay();
    });
  });
}

function renderNutritionDay(){
  const panel = document.getElementById('nutritionDayPanel');
  if (!panel) return;
  panel.innerHTML = '';

  const week = activeWeek;
  const day = activeDay;

  state.nutritionData[week] = state.nutritionData[week] || {};
  state.nutritionData[week][day] = state.nutritionData[week][day] || { meals: [] };

  const dayData = state.nutritionData[week][day];
  const container = document.createElement('div');
  container.className = 'meals';
  container.style.display = 'grid';
  container.style.gridTemplateColumns = 'repeat(auto-fit, minmax(260px, 1fr))';
  container.style.gap = '12px';
  container.style.marginTop = '6px';

  dayData.meals.forEach((meal, index) => {
    const mealEl = document.createElement('div');
    mealEl.className = 'meal';
    mealEl.style.padding = '12px';
    mealEl.style.borderRadius = '10px';
    mealEl.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,250,248,0.95))';
    mealEl.style.border = '1px solid rgba(42,38,36,0.03)';

    const titleEl = document.createElement('div');
    titleEl.className = 'meal-title';
    titleEl.textContent = meal.title || `Meal ${index+1}`;
    if (state.isAdmin) {
      titleEl.contentEditable = 'true';
      titleEl.addEventListener('blur', (e) => {
        state.nutritionData[week][day].meals[index].title = e.target.textContent;
        saveAll();
      });
    }

    const bodyEl = document.createElement('div');
    bodyEl.className = 'meal-body';
    bodyEl.textContent = meal.body || 'Meal description...';
    if (state.isAdmin) {
      bodyEl.contentEditable = 'true';
      bodyEl.addEventListener('blur', (e) => {
        state.nutritionData[week][day].meals[index].body = e.target.textContent;
        saveAll();
      });
    }

    const macroRow = document.createElement('div');
    macroRow.className = 'macro-row';
    macroRow.style.marginTop = '8px';
    macroRow.style.display = 'flex';
    macroRow.style.gap = '8px';
    macroRow.style.flexWrap = 'wrap';

    meal.macros = meal.macros || ['Protein: --g','Carbs: --g','Fat: --g','Calories: --'];

    meal.macros.forEach((macroText, macroIndex) => {
      const macroEl = document.createElement('div');
      macroEl.className = 'macro';
      macroEl.textContent = macroText;
      macroEl.style.background = 'rgba(42,38,36,0.05)';
      macroEl.style.padding = '6px 8px';
      macroEl.style.borderRadius = '8px';
      macroEl.style.fontSize = '12px';
      if (state.isAdmin) {
        macroEl.contentEditable = 'true';
        macroEl.addEventListener('blur', (e) => {
          state.nutritionData[week][day].meals[index].macros[macroIndex] = e.target.textContent;
          saveAll();
        });
      }
      macroRow.appendChild(macroEl);
    });

    mealEl.appendChild(titleEl);
    mealEl.appendChild(bodyEl);
    mealEl.appendChild(macroRow);

    if (state.isAdmin) {
      const deleteBtn = document.createElement('button');
      deleteBtn.className = 'btn danger';
      deleteBtn.textContent = 'Delete Meal';
      deleteBtn.style.marginTop = '8px';
      deleteBtn.addEventListener('click', () => {
        if (confirm('Delete this meal?')) {
          state.nutritionData[week][day].meals.splice(index, 1);
          renderNutritionDay();
          saveAll();
        }
      });
      mealEl.appendChild(deleteBtn);
    }

    container.appendChild(mealEl);
  });

  if (state.isAdmin) {
    const addContainer = document.createElement('div');
    addContainer.style.gridColumn = '1 / -1';
    addContainer.style.textAlign = 'center';
    addContainer.style.padding = '20px';
    const addBtn = document.createElement('button');
    addBtn.className = 'btn success';
    addBtn.textContent = '+ Add Meal';
    addBtn.addEventListener('click', () => {
      state.nutritionData[week][day].meals.push({
        title: 'New Meal',
        body: 'Meal description...',
        macros: ['Protein: --g','Carbs: --g','Fat: --g','Calories: --']
      });
      renderNutritionDay();
      saveAll();
    });
    addContainer.appendChild(addBtn);
    container.appendChild(addContainer);
  }

  panel.appendChild(container);
}

/* ========== Export / Download ========== */
function exportForUsers(){
  if(!state.isAdmin) return;
  const exportData = {
    nutritionData: state.nutritionData,
    fitnessData: state.fitnessData,
    overviewStats: state.overviewStats,
    siteContent: state.siteContent,
    programSettings: state.programSettings
  };
  const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(exportData, null, 2));
  const a = document.createElement('a');
  a.href = dataStr;
  a.download = 'sculpted-by-klea-data.json';
  document.body.appendChild(a);
  a.click();
  a.remove();
  alert('Data exported as JSON');
}

function downloadEditedHTML(){
  if(!state.isAdmin) {
    alert('Admin required');
    return;
  }
  saveAll();
  const currentDate = new Date().toISOString().split('T')[0];
  const exportHtml = document.documentElement.outerHTML;
  const blob = new Blob([exportHtml], { type: 'text/html' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `sculpted-by-klea-${currentDate}.html`;
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
  alert('HTML exported');
}

/* ========== Wiring UI (safe binding after DOM ready) ========== */
function wireUI(){
  // Buttons that always exist
  document.getElementById('exportBtn').addEventListener('click', exportForUsers);
  document.getElementById('downloadHtmlBtn').addEventListener('click', downloadEditedHTML);

  // admin toggle - open prompt
  document.getElementById('adminToggle').addEventListener('click', () => {
    // If admin currently off, this button acts as "Exit Admin Mode" in panel, so toggle lock
    if(state.isAdmin) {
      disableAdminMode();
    } else {
      toggleAdminMode();
    }
  });

  // Admin panel save + reset
  document.getElementById('saveAllBtn').addEventListener('click', () => {
    // read hero inputs & social inputs into state.siteContent
    state.siteContent.heroImages = state.siteContent.heroImages || {};
    const hiOverview = document.getElementById('heroImgOverview').value.trim();
    const hiProgram = document.getElementById('heroImgProgram').value.trim();
    const hiFitness = document.getElementById('heroImgFitness').value.trim();
    const hiNutrition = document.getElementById('heroImgNutrition').value.trim();
    if(hiOverview) state.siteContent.heroImages.overview = hiOverview;
    if(hiProgram) state.siteContent.heroImages.programInfo = hiProgram;
    if(hiFitness) state.siteContent.heroImages.fitness = hiFitness;
    if(hiNutrition) state.siteContent.heroImages.nutrition = hiNutrition;

    const si = document.getElementById('socialInsta').value.trim();
    const st = document.getElementById('socialTiktok').value.trim();
    state.siteContent.socialInsta = si;
    state.siteContent.socialTiktok = st;

    // update footer links immediately
    updateFooterSocials();

    saveAll();
    alert('All changes saved');
  });

  document.getElementById('resetAllBtn').addEventListener('click', () => {
    if(confirm('Reset all data to defaults? This cannot be undone.')) {
      localStorage.clear();
      location.reload();
    }
  });

  // Hook fitness admin controls (buttons exist in DOM)
  const addExerciseBtn = document.getElementById('addExerciseBtn');
  const addWeekBtn = document.getElementById('addFitnessWeekBtn');
  const deleteWeekBtn = document.getElementById('deleteFitnessWeekBtn');
  const saveFitnessBtn = document.getElementById('saveFitnessBtn');
  if (addExerciseBtn) addExerciseBtn.addEventListener('click', addExercise);
  if (addWeekBtn) addWeekBtn.addEventListener('click', addFitnessWeek);
  if (deleteWeekBtn) deleteWeekBtn.addEventListener('click', deleteFitnessWeek);
  if (saveFitnessBtn) saveFitnessBtn.addEventListener('click', () => { saveAll(); alert('Fitness saved'); });

  // Nutrition misc
  const addNutritionDayBtn = document.getElementById('addNutritionDayBtn');
  const deleteNutritionDayBtn = document.getElementById('deleteNutritionDayBtn');
  if (addNutritionDayBtn) addNutritionDayBtn.addEventListener('click', () => { alert('Use "Add Meal" to add meals to existing days'); });
  if (deleteNutritionDayBtn) deleteNutritionDayBtn.addEventListener('click', () => { alert('Nutrition days are fixed at 7 days per week'); });

  // footer social anchors - update on load
  updateFooterSocials();
}

/* ========== Footer Socials update ========== */
function updateFooterSocials(){
  const linkInsta = document.getElementById('linkInsta');
  const linkTiktok = document.getElementById('linkTiktok');
  // If state.siteContent.socialInsta exists, use it, otherwise fallback to '#'
  linkInsta.href = state.siteContent.socialInsta || '#';
  linkTiktok.href = state.siteContent.socialTiktok || '#';
}

/* ========== Boot ========== */
function boot(){
  loadAll();
  initDefaults();
  wireUI();

  // Initial renders
  renderFitnessWeekSelector();
  renderFitnessDays();
  renderExercises();
  renderNutritionWeekSelector();
  renderNutritionDays();
  renderNutritionDay();

  // set initial tab & hero
  setActiveTab('overview');

  // Ensure admin is off by default UI-wise
  disableAdminMode();

  // Populate editable fields from saved siteContent (if any)
  if (state.siteContent) {
    for (const [k, v] of Object.entries(state.siteContent)) {
      // If key matches an element with data-id, set innerHTML / inputs accordingly
      const el = document.querySelector(`[data-id="${k}"]`);
      if (el) el.innerHTML = v;
    }
    // hero images mapping
    if (state.siteContent.heroImages) {
      // apply to hero
      setHeroImageForTab(state.activeTab);
    }
  }

  // Auto-save on blur for contenteditable items (only when in admin)
  document.addEventListener('blur', (e) => {
    if (state.isAdmin && e.target && e.target.hasAttribute && e.target.hasAttribute('contenteditable')) {
      persistSiteContent();
    }
  }, true);

  // Wire top header clickable pills (already uses data-tab above)
}

document.addEventListener('DOMContentLoaded', boot);
document.addEventListener('DOMContentLoaded', () => {
  const adminBtn = document.getElementById('enterAdminBtn');
  if (adminBtn) {
    adminBtn.addEventListener('click', () => {
      const pw = prompt('Enter admin password:');
      if (pw === ADMIN_PASSWORD) {
        enableAdminMode();
        alert('Admin mode enabled');
      } else {
        alert('Incorrect password');
      }
    });
  }
});
document.addEventListener('keydown', (e) => {
  const key = (e.key || '').toLowerCase();
  if ((e.ctrlKey || e.metaKey) && e.shiftKey && key === 'k') {
    e.preventDefault();
    if (state.isAdmin) {
      disableAdminMode();
      alert('Admin mode disabled');
    } else {
      const pw = prompt('Enter admin password:');
      if (pw === ADMIN_PASSWORD) {
        enableAdminMode();
        alert('Admin mode enabled');
      } else {
        alert('Incorrect password');
      }
    }
  }
});
</script>
</body>
</html>
